import{r as o,j as e,u as d,b,f as y,L as m,g as x,h as S,i as k,s as $,k as C,l as c}from"./index-DQuXeqhJ.js";const q="/approved.png";function A({showModal:a}){const[i,l]=o.useState(0),n=o.useRef(null);return o.useEffect(()=>(a?(l(0),n.current=setInterval(()=>{l(r=>r>=100?(clearInterval(n.current),100):r+2)},100)):clearInterval(n.current),()=>clearInterval(n.current)),[a]),e.jsxs("dialog",{open:a,className:"modal",children:[e.jsxs("div",{className:"modal-heading",children:[e.jsx("p",{children:"Order Approved"}),e.jsx("img",{src:q,alt:"approval pic"})]}),e.jsx("p",{children:"Look over the new collection"}),e.jsx("p",{className:"view-button",children:"Thank You"}),e.jsx("progress",{className:"progress-bar",value:i,max:"100"})]})}function R(){d(s=>s.products);const a=d(s=>s.cart),i=d(s=>s.shipping),l=d(s=>s.order),n=d(s=>s.validation.errors),r=b(),j=y(),[u,p]=o.useState(!1);function v(){return Date.now().toString()}const N=()=>{let s=!0;return(!i.name||i.name.trim()==="")&&(r(c({field:"name",message:"Name is required"})),s=!1),(!i.phoneNumber||!/^\d{10}$/.test(i.phoneNumber))&&(r(c({field:"phoneNumber",message:"10 Number is Required"})),s=!1),(!i.address||i.address.trim()==="")&&(r(c({field:"address",message:"Address is required"})),s=!1),(!i.pincode||!/^\d{6}$/.test(i.pincode))&&(r(c({field:"pincode",message:"Valid 6 digit pincode is required"})),s=!1),s},t=s=>{const{name:h,value:g}=s.target;r(S({[h]:g})),r(k())},f=s=>{if(s.preventDefault(),!N())return;const h=v();r($({id:h,items:a.items,shippingAddress:{...i}})),p(!0),setTimeout(()=>{r(x()),r(C()),p(!1),j("/shoes")},5e3),console.log(l)};return e.jsxs("div",{className:"payment-container",children:[e.jsx(A,{showModal:u}),e.jsx("div",{className:"payment-heading",children:e.jsxs("p",{children:[e.jsx("span",{children:e.jsx(m,{className:"link-button",to:"/",children:"Home/"})}),e.jsx("span",{children:e.jsx(m,{className:"link-button",to:"/shoes/checkout",children:"checkout"})}),"/ payment"]})}),e.jsxs("div",{className:"payment-content",children:[e.jsxs("div",{className:"first-part",children:[e.jsx("div",{className:"shipping-heading",children:e.jsx("p",{children:"Tell me your location, and I'll drop off those sneaker vibes!"})}),e.jsxs("form",{onSubmit:f,children:[e.jsxs("div",{className:"input-fields-first",children:[e.jsxs("div",{children:[e.jsx("p",{children:e.jsx("label",{children:"Name"})}),e.jsxs("p",{children:[e.jsx("input",{type:"text",name:"name",value:i.name,onChange:t}),n.name&&e.jsx("p",{className:"error-message",children:n.name})]})]}),e.jsxs("div",{children:[e.jsx("p",{children:e.jsx("label",{children:"Phone Number"})}),e.jsxs("p",{children:[e.jsx("input",{type:"text",name:"phoneNumber",value:i.phoneNumber,onChange:t}),n.phoneNumber&&e.jsx("p",{className:"error-message",children:n.phoneNumber})]})]})]}),e.jsxs("div",{className:"input-fields-second",children:[e.jsx("p",{children:e.jsx("label",{children:"Address"})}),e.jsxs("p",{children:[e.jsx("textarea",{cols:72,rows:8,name:"address",value:i.address,onChange:t}),n.address&&e.jsx("p",{className:"error-message",children:n.address})]})]}),e.jsxs("div",{className:"input-fields-third",children:[e.jsx("p",{children:e.jsx("label",{children:"Pincode"})}),e.jsxs("p",{children:[e.jsx("input",{type:"text",name:"pincode",value:i.pincode,onChange:t}),n.pincode&&e.jsx("p",{className:"error-message",children:n.pincode})]})]}),e.jsxs("div",{className:"input-fields-fourth",children:[e.jsx("div",{children:e.jsx("button",{type:"button",onClick:()=>r(x()),children:"Reset"})}),e.jsx("div",{children:e.jsx("button",{type:"submit",children:"Shippppp"})})]})]})]}),e.jsxs("div",{className:"second-part",children:[e.jsx("div",{className:"checkout-table",children:e.jsx("table",{children:e.jsx("tbody",{children:a.items.map(s=>e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsxs("div",{className:"payment-image",children:[e.jsx("img",{src:s.imageURL,alt:"head"}),e.jsx("span",{className:"quantity",children:s.quantity})]}),e.jsx("div",{className:"checkout-shoes-details",children:e.jsxs("div",{children:[e.jsx("p",{children:s.name}),e.jsxs("p",{children:["Size: ",e.jsx("span",{className:"shoes-summary",children:s.size})]}),e.jsxs("p",{children:["Brand: ",e.jsx("span",{className:"shoes-summary",children:s.brand})]})]})})]}),e.jsxs("td",{children:["$",s.price]})]},`${s.id}-${s.size}`))})})}),e.jsxs("div",{className:"payment-summary",children:[e.jsx("div",{children:e.jsx("h2",{children:"Order Summary"})}),e.jsxs("div",{className:"payment-subtotal",children:[e.jsx("div",{children:e.jsx("p",{children:"Sub Total"})}),e.jsxs("div",{className:"subtotal-partition",children:[e.jsx("div",{children:e.jsxs("p",{children:["Items: ",a.totalQuantity]})}),e.jsx("div",{children:e.jsxs("p",{children:["$",a.totalPrice]})})]})]}),e.jsxs("div",{className:"discount-partition",children:[e.jsx("div",{children:e.jsx("p",{children:"Discount"})}),e.jsx("div",{children:e.jsx("p",{children:"$0"})})]})]}),e.jsxs("div",{className:"total-amount",children:[e.jsx("div",{children:e.jsx("h2",{children:"Total Amount"})}),e.jsx("div",{children:e.jsxs("p",{children:["$",a.totalPrice]})})]}),e.jsx("div",{className:"payment-tax",children:"(inclusive of tax 0.00$)"})]})]})]})}export{R as default};
